server { 
          listen 80; 
          return 301 https://$host$request_uri; 
        }
server {
          listen 443 ssl http2;
          ssl_certificate /etc/nginx/certs/server.crt;
          ssl_certificate_key /etc/nginx/certs/server.key;
          root /usr/share/nginx/html;
          location /api/ { 
              proxy_pass http://backend:8000/api/; 
              proxy_set_header X-Forwarded-Proto https; 
              }
          location /ws  { proxy_pass http://backend:8000/ws; 
          proxy_http_version 1.1; 
          proxy_set_header Upgrade $http_upgrade; 
          proxy_set_header Connection "Upgrade"; 
          proxy_set_header X-Forwarded-Proto https; 
          }
          location / { try_files $uri /index.html; 
          }
}